{"ast":null,"code":"import _toConsumableArray from\"C:/Users/USER/Desktop/HungryHub1/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/USER/Desktop/HungryHub1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./menu.css';import{useLocation,useNavigate}from'react-router-dom';import axios from'../../axios';import{UserLoginContext}from'../context/useContext';import{useContext}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MenuList(){var _useContext=useContext(UserLoginContext),user=_useContext.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var location=useLocation();var navigate=useNavigate();useEffect(function(){console.log(user);if(user!==null){setUserId(user._id);}},[userId]);var menu=location.state.menu;var _useState3=useState(menu),_useState4=_slicedToArray(_useState3,2),menuList=_useState4[0],setMenuList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),addedItem=_useState6[0],SetAddedItem=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),count=_useState8[0],setCount=_useState8[1];var addItemToCart=function addItemToCart(menu,number){var token=localStorage.getItem('token');console.log(token);axios.post(\"/users/menu/\".concat(menu.restaurantId),{menu:menu,number:number,userId:userId},{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){var resultItem=response.data.result;SetAddedItem(function(prevItems){var findIndex=prevItems.findIndex(function(item){return item.itemId===resultItem.itemId;});if(findIndex!==-1){var updatedItems=_toConsumableArray(prevItems);updatedItems[findIndex].quantity=resultItem.quantity;return updatedItems;}else{return[].concat(_toConsumableArray(prevItems),[resultItem]);}});}).catch(function(err){if(err.response.status==401){navigate('/login');}});};useEffect(function(){var token=localStorage.getItem('token');console.log(token);axios.post('/users/get-count',{userId:userId},{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){var cartItem=response.data.cartItem;console.log(cartItem);SetAddedItem(cartItem);}).catch(function(err){// console.log(err);\n// console.log(addedItem);\n});},[userId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",id:\"menu-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-data\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Irani Restaurant\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Chinese, North Indian\"})]}),menuList.map(function(menu){console.log(addedItem);var getCartItem;if(addedItem){getCartItem=addedItem.find(function(item){return item.itemId===menu._id;})||0;console.log(getCartItem);}return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:menu.itemName}),/*#__PURE__*/_jsx(\"h5\",{children:menu.price})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:9000/\".concat(menu.imageName),alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"add-buttons\",children:getCartItem&&getCartItem.quantity>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{id:\"minus\",onClick:function onClick(){return addItemToCart(menu,-1);},className:\"click-minus\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-minus\"})}),/*#__PURE__*/_jsx(\"span\",{children:getCartItem&&getCartItem.quantity}),/*#__PURE__*/_jsx(\"button\",{id:\"add\",onClick:function onClick(){return addItemToCart(menu,1);},className:\"click-add\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus\"})})]}):/*#__PURE__*/_jsx(\"button\",{className:\"click-add\",onClick:function onClick(){return addItemToCart(menu,1);},children:\"ADD\"})})]})]},menu._id);})]});}export default MenuList;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","axios","UserLoginContext","useContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MenuList","_useContext","user","_useState","_useState2","_slicedToArray","userId","setUserId","location","navigate","console","log","_id","menu","state","_useState3","_useState4","menuList","setMenuList","_useState5","_useState6","addedItem","SetAddedItem","_useState7","_useState8","count","setCount","addItemToCart","number","token","localStorage","getItem","post","concat","restaurantId","headers","then","response","resultItem","data","result","prevItems","findIndex","item","itemId","updatedItems","_toConsumableArray","quantity","catch","err","status","cartItem","className","id","children","map","getCartItem","find","itemName","price","src","imageName","alt","onClick"],"sources":["C:/Users/USER/Desktop/HungryHub1/client/src/components/menu/MenuList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './menu.css'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport axios from '../../axios'\r\nimport { UserLoginContext } from '../context/useContext'\r\nimport { useContext } from 'react'\r\n\r\nfunction MenuList() {\r\n  const { user } = useContext(UserLoginContext)\r\n  const [userId, setUserId] = useState(null)\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n  useEffect(() => {\r\n    console.log(user);\r\n    if (user !== null) {\r\n      setUserId(user._id);\r\n    }\r\n  }, [userId]);\r\n\r\n  const menu = location.state.menu\r\n  const [menuList, setMenuList] = useState(menu)\r\n  const [addedItem, SetAddedItem] = useState([])\r\n  const [count, setCount] = useState(true)\r\n  const addItemToCart = (menu, number) => {\r\n    const token = localStorage.getItem('token')\r\n    console.log(token);\r\n    axios.post(`/users/menu/${menu.restaurantId}`, { menu, number, userId }, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }).then((response) => {\r\n      let resultItem = response.data.result\r\n      SetAddedItem((prevItems) => {\r\n        const findIndex = prevItems.findIndex((item) => item.itemId === resultItem.itemId);\r\n        if (findIndex !== -1) {\r\n          const updatedItems = [...prevItems];\r\n          updatedItems[findIndex].quantity = resultItem.quantity;\r\n          return updatedItems;\r\n        } else {\r\n          return [...prevItems, resultItem];\r\n        }\r\n\r\n      })\r\n    }).catch((err) => {\r\n      if (err.response.status == 401) {\r\n        navigate('/login')\r\n      }\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token')\r\n    console.log(token);\r\n    axios.post('/users/get-count', { userId }, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }).then((response) => {\r\n      let cartItem = response.data.cartItem\r\n      console.log(cartItem);\r\n      SetAddedItem(cartItem)\r\n\r\n    }).catch((err) => {\r\n      // console.log(err);\r\n      // console.log(addedItem);\r\n    })\r\n\r\n  }, [userId])\r\n  return (\r\n    <div className='container' id='menu-list'>\r\n      <div className=\"restaurant-data\">\r\n        <h2>Irani Restaurant</h2>\r\n        <h4>Chinese, North Indian</h4>\r\n      </div>\r\n      {menuList.map((menu) => {\r\n        console.log(addedItem);\r\n        let getCartItem\r\n        if (addedItem) {\r\n          getCartItem = addedItem.find(item => item.itemId === menu._id) || 0\r\n          console.log(getCartItem);\r\n         \r\n        }\r\n\r\n        return (\r\n          <div className=\"menu-data\" key={menu._id}>\r\n            <div className='menu-item'>\r\n              <h3>{menu.itemName}</h3>\r\n              <h5>{menu.price}</h5>\r\n            </div>\r\n            <div className=\"menu-image\">\r\n              <img src={`http://localhost:9000/${menu.imageName}`} alt=\"\" />\r\n              <div className=\"add-buttons\">\r\n                {getCartItem && getCartItem.quantity > 0 ? (\r\n\r\n                  <>\r\n                    <button id='minus' onClick={() => addItemToCart(menu, -1)} className='click-minus'><i className=\"fa-solid fa-minus\"></i></button>\r\n                    <span>{getCartItem && getCartItem.quantity}</span>\r\n                    <button id=\"add\" onClick={() => addItemToCart(menu, 1)} className='click-add'><i className=\"fa-solid fa-plus\"></i></button>\r\n                  </>\r\n                ) : (\r\n\r\n                  <button className=\"click-add\" onClick={() => addItemToCart(menu, 1)}>ADD</button>\r\n\r\n                )}\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MenuList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}