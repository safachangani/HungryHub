{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\USER\\\\Desktop\\\\swiggy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\USER\\\\Desktop\\\\swiggy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\swiggy\\\\client\\\\src\\\\components\\\\menu\\\\MenuList.js\";\nimport React, { useEffect, useState } from 'react';\nimport './menu.css';\nimport { useLocation } from 'react-router-dom';\nimport axios from '../../axios';\nfunction MenuList() {\n  var _this = this;\n  var location = useLocation();\n  var menu = location.state.menu;\n  var userId = location.state.userId;\n  var _useState = useState(menu),\n    _useState2 = _slicedToArray(_useState, 2),\n    menuList = _useState2[0],\n    setMenuList = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    addedItem = _useState4[0],\n    SetAddedItem = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    count = _useState6[0],\n    setCount = _useState6[1];\n  var addItemToCart = function addItemToCart(menu, number) {\n    console.log('added');\n    axios.post(\"/users/menu/\".concat(menu.restaurantId), {\n      menu: menu,\n      number: number,\n      userId: userId\n    }).then(function (response) {\n      // console.log(response.data.result);\n      var resultItem = response.data.result;\n      SetAddedItem(function (prevItems) {\n        var findIndex = prevItems.findIndex(function (item) {\n          return item.itemId === resultItem.itemId;\n        });\n        if (findIndex !== -1) {\n          var updatedItems = _toConsumableArray(prevItems);\n          updatedItems[findIndex].quantity = resultItem.quantity;\n          return updatedItems;\n        } else {\n          return [].concat(_toConsumableArray(prevItems), [resultItem]);\n        }\n      });\n      //  if (  updatedItems[findIndex].quantity) {\n\n      //  }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n  useEffect(function () {\n    axios.post('/users/get-count', {\n      userId: userId\n    }).then(function (response) {\n      var cartItem = response.data.cartItem;\n      console.log(cartItem);\n      SetAddedItem(cartItem);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    id: \"menu-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"restaurant-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Irani Restaurant\"), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Chinese, North Indian\")), menuList.map(function (menu) {\n    console.log(addedItem);\n    var getCartItem;\n    if (addedItem) {\n      getCartItem = addedItem.find(function (item) {\n        return item.itemId === menu._id;\n      }) || 0;\n      console.log(getCartItem);\n      // const updatedCount = getCartItem === 0 ? false : true;\n      // if (count !== updatedCount) {\n      //   setCount(updatedCount);\n      // }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu-data\",\n      key: menu._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu-item\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, menu.itemName), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, menu.price)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu-image\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"http://localhost:9000/\".concat(menu.imageName),\n      alt: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"add-buttons\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, getCartItem && getCartItem.quantity > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"minus\",\n      onClick: function onClick() {\n        return addItemToCart(menu, -1);\n      },\n      className: \"click-minus\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa-solid fa-minus\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 98\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, getCartItem && getCartItem.quantity), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"add\",\n      onClick: function onClick() {\n        return addItemToCart(menu, 1);\n      },\n      className: \"click-add\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa-solid fa-plus\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 93\n      }\n    }))) : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"click-add\",\n      onClick: function onClick() {\n        return addItemToCart(menu, 1);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, \"ADD\"))));\n  }));\n}\nexport default MenuList;","map":{"version":3,"names":["React","useEffect","useState","useLocation","axios","MenuList","_this","location","menu","state","userId","_useState","_useState2","_slicedToArray","menuList","setMenuList","_useState3","_useState4","addedItem","SetAddedItem","_useState5","_useState6","count","setCount","addItemToCart","number","console","log","post","concat","restaurantId","then","response","resultItem","data","result","prevItems","findIndex","item","itemId","updatedItems","_toConsumableArray","quantity","catch","err","cartItem","createElement","className","id","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","getCartItem","find","_id","key","itemName","price","src","imageName","alt","Fragment","onClick"],"sources":["C:/Users/USER/Desktop/swiggy/client/src/components/menu/MenuList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './menu.css'\r\nimport { useLocation } from 'react-router-dom'\r\nimport axios from '../../axios'\r\n\r\n\r\nfunction MenuList() {\r\n  const location = useLocation()\r\n  const menu = location.state.menu\r\n  const userId = location.state.userId\r\n  const [menuList, setMenuList] = useState(menu)\r\n  const [addedItem,SetAddedItem]= useState([])\r\n  const [count,setCount]= useState(true)\r\n\r\n  const addItemToCart = (menu, number) => {\r\n    console.log('added');\r\n    axios.post(`/users/menu/${menu.restaurantId}`, { menu, number, userId }).then((response) => {\r\n    // console.log(response.data.result);\r\n      let resultItem =response.data.result\r\n   \r\n    SetAddedItem((prevItems)=>{\r\n\r\n  \r\n  const findIndex = prevItems.findIndex((item) => item.itemId === resultItem.itemId);\r\n\r\n  if (findIndex !== -1) {\r\n    const updatedItems = [...prevItems];\r\n    updatedItems[findIndex].quantity = resultItem.quantity;\r\n    return updatedItems;\r\n  } else {\r\n    return [...prevItems, resultItem];\r\n  }\r\n\r\n})\r\n//  if (  updatedItems[findIndex].quantity) {\r\n  \r\n//  }\r\n         \r\n    \r\n    }).catch((err) => {\r\n      console.log(err);\r\n    })\r\n  }\r\n  useEffect(()=>{\r\n    axios.post('/users/get-count',{userId}).then((response)=>{\r\n      \r\n      \r\n      let cartItem = response.data.cartItem\r\n      console.log(cartItem);\r\n      SetAddedItem(cartItem)\r\n        \r\n      \r\n      })\r\n    },[])\r\n    return (\r\n      <div className='container' id='menu-list'>\r\n      <div className=\"restaurant-data\">\r\n        <h2>Irani Restaurant</h2>\r\n        <h4>Chinese, North Indian</h4>\r\n      </div>\r\n\r\n    \r\n                       \r\n      {menuList.map((menu) => {\r\n        console.log(addedItem);\r\n        let getCartItem\r\n        if (addedItem) {\r\n           getCartItem= addedItem.find(item=>item.itemId === menu._id ) ||0\r\n          console.log(getCartItem);\r\n          // const updatedCount = getCartItem === 0 ? false : true;\r\n          // if (count !== updatedCount) {\r\n          //   setCount(updatedCount);\r\n          // }\r\n          \r\n        }\r\n       \r\n  return (\r\n    <div className=\"menu-data\" key={menu._id}>\r\n      <div className='menu-item'>\r\n        <h3>{menu.itemName}</h3>\r\n        <h5>{menu.price}</h5>\r\n      </div>\r\n      <div className=\"menu-image\">\r\n        <img src={`http://localhost:9000/${menu.imageName}`} alt=\"\" />\r\n        <div className=\"add-buttons\">\r\n        {getCartItem && getCartItem.quantity > 0 ?  (\r\n\r\n            <>\r\n              <button id='minus' onClick={() => addItemToCart(menu, -1)} className='click-minus'><i className=\"fa-solid fa-minus\"></i></button>\r\n              <span>{getCartItem && getCartItem.quantity}</span>\r\n              <button id=\"add\" onClick={() => addItemToCart(menu, 1)} className='click-add'><i className=\"fa-solid fa-plus\"></i></button>\r\n            </>\r\n         ) : ( \r\n\r\n            <button className=\"click-add\" onClick={() => addItemToCart(menu, 1)}>ADD</button>\r\n       \r\n         )} \r\n      \r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n})}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MenuList\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAO,YAAY;AACnB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,aAAa;AAG/B,SAASC,QAAQA,CAAA,EAAG;EAAA,IAAAC,KAAA;EAClB,IAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;EAC9B,IAAMK,IAAI,GAAGD,QAAQ,CAACE,KAAK,CAACD,IAAI;EAChC,IAAME,MAAM,GAAGH,QAAQ,CAACE,KAAK,CAACC,MAAM;EAAA,IAAAC,SAAA,GACJT,QAAQ,CAACM,IAAI,CAAC;IAAAI,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAvCG,QAAQ,GAAAF,UAAA;IAAEG,WAAW,GAAAH,UAAA;EAAA,IAAAI,UAAA,GACId,QAAQ,CAAC,EAAE,CAAC;IAAAe,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,SAAS,GAAAD,UAAA;IAACE,YAAY,GAAAF,UAAA;EAAA,IAAAG,UAAA,GACLlB,QAAQ,CAAC,IAAI,CAAC;IAAAmB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAA/BE,KAAK,GAAAD,UAAA;IAACE,QAAQ,GAAAF,UAAA;EAErB,IAAMG,aAAa,GAAG,SAAhBA,aAAaA,CAAIhB,IAAI,EAAEiB,MAAM,EAAK;IACtCC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACpBvB,KAAK,CAACwB,IAAI,gBAAAC,MAAA,CAAgBrB,IAAI,CAACsB,YAAY,GAAI;MAAEtB,IAAI,EAAJA,IAAI;MAAEiB,MAAM,EAANA,MAAM;MAAEf,MAAM,EAANA;IAAO,CAAC,CAAC,CAACqB,IAAI,CAAC,UAACC,QAAQ,EAAK;MAC5F;MACE,IAAIC,UAAU,GAAED,QAAQ,CAACE,IAAI,CAACC,MAAM;MAEtChB,YAAY,CAAC,UAACiB,SAAS,EAAG;QAG5B,IAAMC,SAAS,GAAGD,SAAS,CAACC,SAAS,CAAC,UAACC,IAAI;UAAA,OAAKA,IAAI,CAACC,MAAM,KAAKN,UAAU,CAACM,MAAM;QAAA,EAAC;QAElF,IAAIF,SAAS,KAAK,CAAC,CAAC,EAAE;UACpB,IAAMG,YAAY,GAAAC,kBAAA,CAAOL,SAAS,CAAC;UACnCI,YAAY,CAACH,SAAS,CAAC,CAACK,QAAQ,GAAGT,UAAU,CAACS,QAAQ;UACtD,OAAOF,YAAY;QACrB,CAAC,MAAM;UACL,UAAAX,MAAA,CAAAY,kBAAA,CAAWL,SAAS,IAAEH,UAAU;QAClC;MAEF,CAAC,CAAC;MACF;;MAEA;IAGI,CAAC,CAAC,CAACU,KAAK,CAAC,UAACC,GAAG,EAAK;MAChBlB,OAAO,CAACC,GAAG,CAACiB,GAAG,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC;EACD3C,SAAS,CAAC,YAAI;IACZG,KAAK,CAACwB,IAAI,CAAC,kBAAkB,EAAC;MAAClB,MAAM,EAANA;IAAM,CAAC,CAAC,CAACqB,IAAI,CAAC,UAACC,QAAQ,EAAG;MAGvD,IAAIa,QAAQ,GAAGb,QAAQ,CAACE,IAAI,CAACW,QAAQ;MACrCnB,OAAO,CAACC,GAAG,CAACkB,QAAQ,CAAC;MACrB1B,YAAY,CAAC0B,QAAQ,CAAC;IAGtB,CAAC,CAAC;EACJ,CAAC,EAAC,EAAE,CAAC;EACL,oBACE7C,KAAA,CAAA8C,aAAA;IAAKC,SAAS,EAAC,WAAW;IAACC,EAAE,EAAC,WAAW;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzCtD,KAAA,CAAA8C,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9BtD,KAAA,CAAA8C,aAAA;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,kBAAoB,CAAC,eACzBtD,KAAA,CAAA8C,aAAA;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,uBAAyB,CAC1B,CAAC,EAILxC,QAAQ,CAACyC,GAAG,CAAC,UAAC/C,IAAI,EAAK;IACtBkB,OAAO,CAACC,GAAG,CAACT,SAAS,CAAC;IACtB,IAAIsC,WAAW;IACf,IAAItC,SAAS,EAAE;MACZsC,WAAW,GAAEtC,SAAS,CAACuC,IAAI,CAAC,UAAAnB,IAAI;QAAA,OAAEA,IAAI,CAACC,MAAM,KAAK/B,IAAI,CAACkD,GAAG;MAAA,CAAC,CAAC,IAAG,CAAC;MACjEhC,OAAO,CAACC,GAAG,CAAC6B,WAAW,CAAC;MACxB;MACA;MACA;MACA;IAEF;;IAEN,oBACExD,KAAA,CAAA8C,aAAA;MAAKC,SAAS,EAAC,WAAW;MAACY,GAAG,EAAEnD,IAAI,CAACkD,GAAI;MAAAT,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACvCtD,KAAA,CAAA8C,aAAA;MAAKC,SAAS,EAAC,WAAW;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACxBtD,KAAA,CAAA8C,aAAA;MAAAG,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAK9C,IAAI,CAACoD,QAAa,CAAC,eACxB5D,KAAA,CAAA8C,aAAA;MAAAG,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAK9C,IAAI,CAACqD,KAAU,CACjB,CAAC,eACN7D,KAAA,CAAA8C,aAAA;MAAKC,SAAS,EAAC,YAAY;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACzBtD,KAAA,CAAA8C,aAAA;MAAKgB,GAAG,2BAAAjC,MAAA,CAA2BrB,IAAI,CAACuD,SAAS,CAAG;MAACC,GAAG,EAAC,EAAE;MAAAf,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC,eAC9DtD,KAAA,CAAA8C,aAAA;MAAKC,SAAS,EAAC,aAAa;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAC3BE,WAAW,IAAIA,WAAW,CAACd,QAAQ,GAAG,CAAC,gBAEpC1C,KAAA,CAAA8C,aAAA,CAAA9C,KAAA,CAAAiE,QAAA,qBACEjE,KAAA,CAAA8C,aAAA;MAAQE,EAAE,EAAC,OAAO;MAACkB,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAM1C,aAAa,CAAChB,IAAI,EAAE,CAAC,CAAC,CAAC;MAAA,CAAC;MAACuC,SAAS,EAAC,aAAa;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAACtD,KAAA,CAAA8C,aAAA;MAAGC,SAAS,EAAC,mBAAmB;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAI,CAAS,CAAC,eACjItD,KAAA,CAAA8C,aAAA;MAAAG,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAOE,WAAW,IAAIA,WAAW,CAACd,QAAe,CAAC,eAClD1C,KAAA,CAAA8C,aAAA;MAAQE,EAAE,EAAC,KAAK;MAACkB,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAM1C,aAAa,CAAChB,IAAI,EAAE,CAAC,CAAC;MAAA,CAAC;MAACuC,SAAS,EAAC,WAAW;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAACtD,KAAA,CAAA8C,aAAA;MAAGC,SAAS,EAAC,kBAAkB;MAAAE,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAI,CAAS,CAC1H,CAAC,gBAGHtD,KAAA,CAAA8C,aAAA;MAAQC,SAAS,EAAC,WAAW;MAACmB,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAM1C,aAAa,CAAChB,IAAI,EAAE,CAAC,CAAC;MAAA,CAAC;MAAAyC,MAAA,EAAA3C,KAAA;MAAA4C,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAC,KAAW,CAI/E,CACF,CACF,CAAC;EAEV,CAAC,CAEQ,CAAC;AAEV;AAEA,eAAejD,QAAQ"},"metadata":{},"sourceType":"module"}